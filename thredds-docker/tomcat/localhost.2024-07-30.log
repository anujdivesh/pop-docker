30-Jul-2024 00:04:48.364 SEVERE [http-nio-8080-exec-9] org.apache.catalina.core.StandardWrapperValve.invoke Servlet.service() for servlet [wms] in context with path [/thredds] threw exception
	java.io.IOException: java.util.concurrent.ExecutionException: java.io.IOException: java.io.IOException: File is truncated should be= 58325296 actual = 16960468
		at thredds.server.wms.ThreddsWmsServlet.acquireCatalogue(ThreddsWmsServlet.java:146)
		at thredds.server.wms.ThreddsWmsServlet.dispatchWmsRequest(ThreddsWmsServlet.java:113)
		at uk.ac.rdg.resc.edal.wms.WmsServlet.doGet(WmsServlet.java:300)
		at javax.servlet.http.HttpServlet.service(HttpServlet.java:529)
		at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:199)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:144)
		at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:168)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:144)
		at org.apache.catalina.filters.CorsFilter.handleNonCORS(CorsFilter.java:331)
		at org.apache.catalina.filters.CorsFilter.doFilter(CorsFilter.java:158)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:168)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:144)
		at org.apache.catalina.filters.HttpHeaderSecurityFilter.doFilter(HttpHeaderSecurityFilter.java:129)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:168)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:144)
		at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
		at thredds.servlet.filter.RequestBracketingLogMessageFilter.doFilter(RequestBracketingLogMessageFilter.java:50)
		at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
		at thredds.servlet.filter.RequestQueryFilter.doFilter(RequestQueryFilter.java:90)
		at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
		at thredds.servlet.filter.HttpHeadFilter.doFilter(HttpHeadFilter.java:47)
		at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
		at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
		at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
		at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
		at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:168)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:144)
		at org.apache.logging.log4j.web.Log4jServletFilter.doFilter(Log4jServletFilter.java:71)
		at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:168)
		at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:144)
		at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:168)
		at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
		at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
		at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
		at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
		at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:660)
		at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
		at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:346)
		at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:388)
		at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
		at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:936)
		at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
		at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
		at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
		at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
		at java.base/java.lang.Thread.run(Thread.java:829)
	Caused by: java.util.concurrent.ExecutionException: java.io.IOException: java.io.IOException: File is truncated should be= 58325296 actual = 16960468
		at com.google.common.util.concurrent.AbstractFuture.getDoneValue(AbstractFuture.java:592)
		at com.google.common.util.concurrent.AbstractFuture.get(AbstractFuture.java:551)
		at com.google.common.util.concurrent.AbstractFuture$TrustedFuture.get(AbstractFuture.java:111)
		at com.google.common.util.concurrent.Uninterruptibles.getUninterruptibly(Uninterruptibles.java:247)
		at com.google.common.cache.LocalCache$Segment.getAndRecordStats(LocalCache.java:2345)
		at com.google.common.cache.LocalCache$Segment.loadSync(LocalCache.java:2313)
		at com.google.common.cache.LocalCache$Segment.lockedGetOrLoad(LocalCache.java:2189)
		at com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2079)
		at com.google.common.cache.LocalCache.get(LocalCache.java:4011)
		at com.google.common.cache.LocalCache$LocalManualCache.get(LocalCache.java:4919)
		at thredds.server.wms.ThreddsWmsServlet.acquireCatalogue(ThreddsWmsServlet.java:128)
		... 49 more
	Caused by: java.io.IOException: java.io.IOException: File is truncated should be= 58325296 actual = 16960468
		at ucar.nc2.NetcdfFiles.open(NetcdfFiles.java:281)
		at ucar.nc2.dataset.NetcdfDatasets.openProtocolOrFile(NetcdfDatasets.java:455)
		at ucar.nc2.dataset.NetcdfDatasets.openFile(NetcdfDatasets.java:347)
		at ucar.nc2.dataset.NetcdfDatasets$StandardFileFactory.open(NetcdfDatasets.java:38)
		at ucar.nc2.dataset.NetcdfDatasets$StandardFileFactory.open(NetcdfDatasets.java:35)
		at ucar.nc2.util.cache.FileCache.acquire(FileCache.java:287)
		at ucar.nc2.dataset.NetcdfDatasets.openOrAcquireFile(NetcdfDatasets.java:409)
		at ucar.nc2.dataset.NetcdfDatasets.acquireFile(NetcdfDatasets.java:386)
		at ucar.nc2.dataset.NetcdfDatasets.acquireFile(NetcdfDatasets.java:361)
		at thredds.core.DatasetManager.openNetcdfFile(DatasetManager.java:214)
		at thredds.core.TdsRequestedDataset.openAsNetcdfFile(TdsRequestedDataset.java:173)
		at thredds.core.TdsRequestedDataset.getNetcdfFile(TdsRequestedDataset.java:91)
		at thredds.server.wms.ThreddsWmsServlet.acquireNetcdfDataset(ThreddsWmsServlet.java:167)
		at thredds.server.wms.ThreddsWmsServlet.lambda$acquireCatalogue$1(ThreddsWmsServlet.java:129)
		at com.google.common.cache.LocalCache$LocalManualCache$1.load(LocalCache.java:4924)
		at com.google.common.cache.LocalCache$LoadingValueReference.loadFuture(LocalCache.java:3570)
		at com.google.common.cache.LocalCache$Segment.loadSync(LocalCache.java:2312)
		... 54 more
	Caused by: java.io.IOException: File is truncated should be= 58325296 actual = 16960468
		at ucar.nc2.internal.iosp.hdf5.H5headerNew.readSuperBlock2(H5headerNew.java:394)
		at ucar.nc2.internal.iosp.hdf5.H5headerNew.read(H5headerNew.java:245)
		at ucar.nc2.internal.iosp.hdf5.H5iospNew.build(H5iospNew.java:126)
		at ucar.nc2.NetcdfFiles.build(NetcdfFiles.java:835)
		at ucar.nc2.NetcdfFiles.open(NetcdfFiles.java:770)
		at ucar.nc2.NetcdfFiles.open(NetcdfFiles.java:278)
		... 70 more
